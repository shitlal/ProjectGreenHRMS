<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Onboarding Form</title>
	<link rel="stylesheet" href="styles.css" />
	<style>
		table,
		th,
		td {
			border: 1px solid white;
			border-collapse: collapse;
		}

		th,
		td {
			background-color: #96D4D4;
		}

		select {
			border: none;
			padding: 10px 20px;
			border-radius: 5px;
		}

		select:focus {
			outline: none;
		}

		button {
			padding: 10px;
			margin-bottom: 10px;
			background-color: #4285f4;
			color: #ffffff;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		button:hover {
			background-color: #2a5298;
		}

		button[type="submit"] {
			background-color: #34a853;
		}

		button[type="submit"]:hover {
			background-color: #2e8a4e;
		}

        /* Hide the div by default */
       
	</style>

</head>

<body>
	<div class="container">
		<br>
		<h1><i>On Boarding</i>

		</h1>
		<form action="">



		â€ƒ<div class="button_container">
				<label class="col-form-label" for="jobs">Job Code : </label>
 
				
				<select id="firstDropdown" th:value="*{selectedValue}" onchange="fetchSecondDropdownValues()">
					<option>select</option>
    <option th:each="career : ${career}" th:value="${career.jobCode}" th:text="${career.jobCode}">Option 1</option>
</select>
			</div>
 
			<div class="button_container">
				<label class="col-form-label" for="candId">Candidate ID : </label>
 
				
				
				<select id="secondDropdown" th:value=="*{secondSelectedValue}">
    <option th:each="Recruit : ${Recruit}" th:value="${Recruit.candidateid}" th:text="${Recruit.candidateid}">SubOption 1</option>
</select>
			
			</div>
			<br>

			<label for="employeeId"> </label>
            <button id="myButton" onClick="toggleFileUploadForm()">
				Create Employee
			</button>
			<br>

			<!--	<button type="submit">Submit</button>
			<br>-->

		</form>
	</div>
    <div class="fileUploadFormContainer">
        <form id="fileUploadForm"  enctype="multipart/form-data"
           th:action="${OnBoardingEntity}">
            <div>
                <div class="form-group col-md-8">
                    <br>
                    <label for="employeeId">Employee ID:</label>
                    <input type="text"  id="employeeId" placeholder="Employee ID" readonly />
                </div>


                <div class="form-group col-md-8">
                    <label for="idProof">Upload ID Proof:</label>
                    <input type="file"  required />
                </div>

                <div class="form-group col-md-8">
                    <label for="photograph">Photograph:</label>
                    <input type="file"  required />
                </div>

                <!-- Add other form fields for dateOfJoining, level, backgroundCheckStatus, probationPeriod, relivingLetterPath -->
                <div class="form-group col-md-8">
                    <label for="joiningDate">Date of Joining:</label>
                    <input type="date"  id="joiningDate" placeholder="joiningDate" required>
                </div>

                <div class="form-group col-md-8">
                    <label for="level">Level:</label>
                    <select id="level"  name="level">
                        <option value="level1">Level 1</option>
                        <option value="level2">Level 2</option>
                        <option value="level3">Level 3</option>
                        <!-- Add more levels as needed -->
                    </select>
                </div>

                <div class="form-group col-md-8">
                    <label for="level">Background Check Status:</label>
                    <select id="Bk_Status"  name="level">
                        <option value="initialize">initialize</option>
                        <option value="Cleared">Cleared</option>
                        <option value="Rejected">Rejected</option>
                    </select>
                </div>

                <div class="form-group col-md-8">
                    <label for="level">Probation Peiod Status:</label>
                    <select id="PP_Status"  name="level">
                        <option value="Under Problem">Probation</option>
                        <option value="confirmed">confirmed</option>
                    </select>
                </div>

                <div class="form-group col-md-8">
                    <label for="relivingLetter">Reliving & Experince:</label>
                    <input type="file"  accept=".pdf" required>
                </div>


                <div class="form-group col-md-8">
                    <button type="button" onclick="uploadFiles()">Submit</button>
                </div>
            </div>
        </form>

    </div>
	<script>
        function toggleFileUploadForm() {
			const fileUploadFormContainer = document.querySelector('.fileUploadFormContainer');
					form_container_form.style.display = (fileUploadFormContainer.style.display = 'none') ? 'block' : 'none';
           }
	    	
		
		

		function fetchSecondDropdownValues() {
        var selectedValue = document.getElementById('firstDropdown').value;

        // Make an AJAX call to the Spring Boot controller to get values for the second dropdown
        fetch('/search/' + selectedValue)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(Recruit => {
                // Populate the second dropdown with the fetched values
                var secondDropdown = document.getElementById('secondDropdown');
                secondDropdown.innerHTML = '';

                Recruit.forEach(Recruit => {
                    var option = document.createElement('option');
                    option.value = Recruit.candidateid;
                    option.text = Recruit.candidateid;
                    secondDropdown.appendChild(option);
                });
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }  
    
        function uploadFiles() {
            // Submit the form when the button is clicked

            document.getElementById("fileUploadForm").submit();
            window.alert("Files uploaded successfully!");

         

        }
	</script>


</body>

</html>